# Interception-of-ICMP-and-DNS

Симулятор маршрута, который преобразует стандартный вывод команды `traceroute` в поэтическую последовательность.

## Функциональность

- Перехватывает DNS запросы для целевого домена и подменяет IP адрес
- Обрабатывает ICMP и UDP пакеты для имитации работы traceroute
- Создает кастомные ответы для каждого хопа с именами из стихотворения
- Прозрачно пропускает весь остальной трафик


## Установка

### Установка зависимостей на Alpine Linux:

```bash
apk update
apk add python3 py3-pip iptables
pip3 install scapy netfilterqueue
```

## Запуск

### Базовое использование:

```bash
python3 custom_traceroute.py
```

### С кастомным стихотворением:

```bash
python3 custom_traceroute.py --song-file song.txt
```

### С кастомными настройками:

```bash
python3 custom_traceroute.py --trigger example.com --prefix 192.168.1. --queue 2 --song-file my_song.txt
```

### Параметры командной строки:

- `--song-file` - путь к файлу со стихотворением (по одной строке на хоп)
- `--trigger` - доменное имя, которое запускает симуляцию (по умолчанию: rerand0m.ru)
- `--prefix` - префикс IP адресов для симуляции (по умолчанию: 10.0.0.)
- `--queue` - ID очереди NetfilterQueue (по умолчанию: 1)

## Формат файла со стихотворением

Создайте файл с вашим стихотворением, где каждая строка будет преобразована в имя хоста для соответствующего хопа:

```
Первая строка стиха
Вторая строка здесь
Третья продолжается
...
Последняя строка
```

Пример преобразования:
- "Hello world" → `hello.world`
- "My test line" → `my.test.line`

## Тестирование

После запуска программы на Alpine-2, выполните на Alpine-1:

```bash
traceroute rerand0m.ru

```
